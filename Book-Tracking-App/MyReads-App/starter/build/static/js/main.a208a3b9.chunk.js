(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{19:function(e,t,s){},22:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(13),c=s.n(n),r=(s(19),s(5)),i=s.n(r),o=s(14),l=s(7),h=s(4),u=(s(8),s(2)),d=s(1),j=function(){return Object(d.jsx)("div",{className:"list-books-title",children:Object(d.jsx)("h1",{children:"MyReads"})})},b=function(e){var t=e.bookInfo,s=e.shelves,a=e.updateState;return Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.bgImageUrl,")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{value:t.shelf,onChange:function(e){var s;s=e.target.value,a(t,s)},children:[Object(d.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(d.jsx)("option",{children:"None"}),s.map((function(e){return Object(d.jsx)("option",{value:e.shelfName,children:e.shelfDisplayName})}))]})})]}),Object(d.jsx)("div",{className:"book-title",children:t.title}),Object(d.jsx)("div",{className:"book-authors",children:t.authors})]})},f=s(11),p="https://reactnd-books-api.udacity.com",O=localStorage.token;O||(O=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:O},m=function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)(Object(f.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},x=function(e,t){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(f.a)(Object(f.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},k=function(e){var t=e.shelfTitle,s=e.viewTitle,n=e.shelves,c=e.updateState,r=Object(a.useState)([]),o=Object(h.a)(r,2),u=o[0],j=o[1],f=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/books"),{headers:v}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,j(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){f()}),[u]);return Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:s}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:u.filter((function(e){return e.shelf===t})).map((function(e){var t={id:e.id,title:e.title,authors:e.authors,bgImageUrl:e.imageLinks.thumbnail,shelf:e.shelf};return function(e,t){c(e,t)}(t,t.shelf),Object(d.jsx)("li",{children:Object(d.jsx)(b,{bookInfo:t,shelves:n,updateState:c},e.id)})}))})})]})},g=s(6),N=function(){return Object(d.jsx)("div",{className:"open-search",children:Object(d.jsx)(g.b,{to:"/search",children:"Add a book"})})},y=function(e){var t=e.shelves,s=e.updateState;return Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)("div",{className:"list-books",children:[Object(d.jsx)(j,{},"heading-title"),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{children:[Object(d.jsx)(k,{shelfTitle:"read",viewTitle:"Read",shelves:t,updateState:s},"shelf"+t[0].id),Object(d.jsx)(k,{shelfTitle:"wantToRead",viewTitle:"Want to read",shelves:t,updateState:s},"shelf"+t[1].id),Object(d.jsx)(k,{shelfTitle:"currentlyReading",viewTitle:"Currently reading",shelves:t,updateState:s},"shelf"+t[2].id)]})}),Object(d.jsx)(N,{},"search-button")]})})},S=function(e){var t=e.shelves,s=e.updateState,n=e.books,c=Object(a.useState)([]),r=Object(h.a)(c,2),o=r[0],u=r[1],j=Object(a.useState)(""),f=Object(h.a)(j,2),p=f[0],O=f[1],v=function(){var e=Object(l.a)(i.a.mark((function e(t,s){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,s);case 2:a=e.sent,""===t&&u([]),void 0!==a&&u(a);case 5:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(p,100),e.abrupt("return",(function(){u([]),O("")}));case 2:case"end":return e.stop()}}),e)}))),[p]);var m=o.map((function(e){var t=n.filter((function(t){return t.id===e.id}))[0];return e.shelf=t?t.shelf:"none",e}));return Object(d.jsxs)("div",{className:"search-books",children:[Object(d.jsxs)("div",{className:"search-books-bar",children:[Object(d.jsx)(g.b,{className:"close-search",to:"/",children:"Close"}),Object(d.jsx)("div",{className:"search-books-input-wrapper",children:Object(d.jsx)("input",{type:"text",value:p,placeholder:"Search by title, author, or ISBN",onChange:function(e){O(e.target.value)}})})]}),Object(d.jsx)("div",{className:"search-books-results",children:Object(d.jsx)("ol",{className:"books-grid",children:m.length&&m.map((function(e){try{n.forEach((function(t){e.id===t.id&&(e.shelf=t.shelf)}));var a={id:e.id,title:e.title,authors:e.authors,bgImageUrl:e.imageLinks.thumbnail||e.imageLinks.smallThumbnail,shelf:e.shelf};return Object(d.jsx)("li",{children:Object(d.jsx)(b,{bookInfo:a,shelves:t,updateState:s},a.id)})}catch(c){console.log(c)}}))})})]})};var w=function(){var e=[{id:"1",shelfName:"read",shelfDisplayName:"Read"},{id:"2",shelfName:"currentlyReading",shelfDisplayName:"Currently reading"},{id:"3",shelfName:"wantToRead",shelfDisplayName:"Want to read"}],t=Object(a.useState)([]),s=Object(h.a)(t,2),n=s[0],c=s[1],r=function(){var e=Object(l.a)(i.a.mark((function e(t,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.shelf=s,e.next=3,m(t,s);case 3:c([].concat(Object(o.a)(n.filter((function(e){return e.id!==t.id}))),[t]));case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{exact:!0,path:"/",element:Object(d.jsx)(y,{shelves:e,updateState:r},"shelves")}),Object(d.jsx)(u.a,{exact:!0,path:"/search",element:Object(d.jsx)(S,{shelves:e,books:n,updateState:r},"search-page")})]})};c.a.render(Object(d.jsx)(g.a,{children:Object(d.jsx)(w,{},"app")}),document.getElementById("root"))},8:function(e,t,s){}},[[22,1,2]]]);
//# sourceMappingURL=main.a208a3b9.chunk.js.map